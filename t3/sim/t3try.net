CIRCUIT

.param pi = 3.14159265359
.param n = 26.8980
vS 2 1 0 sin(0 'sqrt(2)*230/n' 50)

*Envelope detector
De1 2 3 Default
De2 0 1 Default
De3 1 3 Default
De4 0 2 Default
Re 3 0 14k
Ce 3 0 14u


*Voltage Regulator
R 3 4 1

D1 4 0 Default
*D2 5 6 Default
*D3 6 7 Default
*D4 7 8 Default
*D5 8 9 Default
*D6 9 10 Default
*D7 10 11 Default
*D8 11 12 Default
*D9 12 13 Default
*D10 13 14 Default
*D11 14 15 Default
*D12 15 16 Default
*D13 16 17 Default
*D14 17 18 Default
*D15 18 0 Default

.model Default D
.op
.end

.measure tran FountainMAX MAX v(2,1) from=20m to=220m
.measure tran OutEnvelopeMAX MAX v(3) from=20m to=220m
.measure tran OutRegulatorMAX MAX v(4) from=20m to=220m

.control

tran 1e-4 220e-3

plot v(2,1) v(3) v(4)

*plot 'v(3)-12'

.endc
.end